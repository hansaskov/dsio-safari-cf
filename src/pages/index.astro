---
import Layout from "../layouts/Layout.astro";
import { actions, isInputError } from "astro:actions";

const result = Astro.getActionResult(actions.setName);
const inputErrors = isInputError(result?.error) ? result.error.fields : {};

if (result && !result.error) {
    return Astro.redirect(`/wait`);
}
---

<Layout>
    <form method="post" action={actions.setName}>
        <label>
            Name
            <input required type="text" name="name" />
        </label>
        {inputErrors.name && <p id="error">{inputErrors.name.join(",")}</p>}
        <button>Submit</button>
    </form>
</Layout>
